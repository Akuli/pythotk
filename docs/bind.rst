Binding
=======


Event Objects
-------------

In Tcl, code like this...

.. code-block:: tcl

    bind $widget <Button-1> {puts "clicked at %X,%Y"}

...means that if the widget is clicked 10 pixels right and 20 pixels down from
the top left corner of the widget's parent window, ``clicked at 10,20`` will be
printed. Here ``puts "clicked at %X,%Y"`` is a string of code, and ``%X`` and
``%Y`` are replaced with the coordinates before it's ran.

This pythotk code does the same thing::

    def on_click(event):
        print("clicked at {},{}".format(event.rootx, event.rooty))

    widget.bind('<Button-1>', on_click, event=True)

Here ``on_click()`` gets an event object. It has attributes that describe what
happened, like ``rootx`` and ``rooty``. If you don't pass ``event=True``, the
callback will be called without the event object.

Tk's documentation contains information about the information available to
events in :man:`bind(3tk)`, but the useful stuff seems to be in
:man:`event(3tk)`. Event object attributes are named similarly as in
:man:`event(3tk)`; for example, there is a ``-rootx`` option in
:man:`event(3tk)`, and that's why pythotk's event objects have a ``rootx``
attribute.

Here is a long table of attributes that pythotk supports. It took me a long
time to make. The list also demonstrates how limited tkinter is; only a few
things in this table are supported in tkinter.

.. |br| raw:: html

    <br>

+-----------------------------------------------------------------------+---------------------------+---------------------------------------+---------------------------------------+
| Name in :man:`event(3tk)` and |br| pythotk event attribute            | Type in pythotk           | Tkinter event |br| attribute, if any  | Tcl substitution |br| :man:`bind(3tk)`|
+=======================================================================+===========================+=======================================+=======================================+
| ``above``                                                             | ``int``                   |                                       | ``%a``                                |
+-----------------------------------------------------------------------+---------------------------+---------------------------------------+---------------------------------------+
| ``borderwidth``                                                       | ``int``                   |                                       | ``%B``                                |
+-----------------------------------------------------------------------+---------------------------+---------------------------------------+---------------------------------------+
| ``button``                                                            | ``int``                   | ``num``                               | ``%b``                                |
+-----------------------------------------------------------------------+---------------------------+---------------------------------------+---------------------------------------+
| not in :man:`event(3tk)` |br| ``char`` in pythotk                     | ``str``                   | ``char``                              | ``%A``                                |
+-----------------------------------------------------------------------+---------------------------+---------------------------------------+---------------------------------------+
| ``count``                                                             | ``int``                   |                                       | ``%c``                                |
+-----------------------------------------------------------------------+---------------------------+---------------------------------------+---------------------------------------+
| ``data``                                                              | see :ref:`virtual-event`  |                                       | ``%d``                                |
+-----------------------------------------------------------------------+---------------------------+---------------------------------------+---------------------------------------+
| ``detail`` in :man:`event(3tk)` |br| ``event.data(str)`` in pythotk   | ``str``                   |                                       | ``%d``                                |
+-----------------------------------------------------------------------+---------------------------+---------------------------------------+---------------------------------------+
| ``delta``                                                             | ``int``                   | ``delta``                             | ``%D``                                |
+-----------------------------------------------------------------------+---------------------------+---------------------------------------+---------------------------------------+
| ``focus``                                                             | ``bool``                  | ``focus``                             | ``%f``                                |
+-----------------------------------------------------------------------+---------------------------+---------------------------------------+---------------------------------------+
| ``height``                                                            | ``int``                   | ``height``                            | ``%h``                                |
+-----------------------------------------------------------------------+---------------------------+---------------------------------------+---------------------------------------+
| not in :man:`event(3tk)` |br| ``i_window`` in pythotk                 | ``int``                   |                                       | ``%i``                                |
+-----------------------------------------------------------------------+---------------------------+---------------------------------------+---------------------------------------+
| ``keycode``                                                           | ``int``                   | ``keycode``                           | ``%k``                                |
+-----------------------------------------------------------------------+---------------------------+---------------------------------------+---------------------------------------+
| ``keysym``                                                            | ``str``                   | ``keysym``                            | ``%K``                                |
+-----------------------------------------------------------------------+---------------------------+---------------------------------------+---------------------------------------+
| not in :man:`event(3tk)` |br| ``keysym_num`` in pythotk               | ``int``                   | ``keysym_num``                        | ``%N``                                |
+-----------------------------------------------------------------------+---------------------------+---------------------------------------+---------------------------------------+
| ``mode``                                                              | ``str``                   |                                       | ``%m``                                |
+-----------------------------------------------------------------------+---------------------------+---------------------------------------+---------------------------------------+
| ``override``                                                          | ``bool``                  |                                       | ``%o``                                |
+-----------------------------------------------------------------------+---------------------------+---------------------------------------+---------------------------------------+
| ``place``                                                             | ``str``                   |                                       | ``%p``                                |
+-----------------------------------------------------------------------+---------------------------+---------------------------------------+---------------------------------------+
| not in :man:`event(3tk)` |br| ``property_name`` in pythotk            | ``str``                   |                                       | ``%P``                                |
+-----------------------------------------------------------------------+---------------------------+---------------------------------------+---------------------------------------+
| ``root``                                                              | ``int``                   |                                       | ``%R``                                |
+-----------------------------------------------------------------------+---------------------------+---------------------------------------+---------------------------------------+
| ``rootx``                                                             | ``int``                   | ``x_root``                            | ``%X``                                |
+-----------------------------------------------------------------------+---------------------------+---------------------------------------+---------------------------------------+
| ``rooty``                                                             | ``int``                   | ``y_root``                            | ``%Y``                                |
+-----------------------------------------------------------------------+---------------------------+---------------------------------------+---------------------------------------+
| ``sendevent``                                                         | ``bool``                  | ``send_event``                        | ``%E``                                |
+-----------------------------------------------------------------------+---------------------------+---------------------------------------+---------------------------------------+
| ``serial``                                                            | ``int``                   | ``serial``                            | ``%#``                                |
+-----------------------------------------------------------------------+---------------------------+---------------------------------------+---------------------------------------+
| ``state``                                                             | ``str``                   | ``state``                             | ``%s``                                |
+-----------------------------------------------------------------------+---------------------------+---------------------------------------+---------------------------------------+
| ``subwindow``                                                         | ``int``                   |                                       | ``%S``                                |
+-----------------------------------------------------------------------+---------------------------+---------------------------------------+---------------------------------------+
| ``time``                                                              | ``int``                   | ``time``                              | ``%t``                                |
+-----------------------------------------------------------------------+---------------------------+---------------------------------------+---------------------------------------+
| not in :man:`event(3tk)` |br| ``type`` in pythotk                     | ``int``                   | ``type``                              | ``%T``                                |
+-----------------------------------------------------------------------+---------------------------+---------------------------------------+---------------------------------------+
| not in :man:`event(3tk)` |br| ``widget`` in pythotk                   | :class:`.Widget`          | ``widget``                            | ``%W``                                |
+-----------------------------------------------------------------------+---------------------------+---------------------------------------+---------------------------------------+
| ``width``                                                             | ``int``                   | ``width``                             | ``%w``                                |
+-----------------------------------------------------------------------+---------------------------+---------------------------------------+---------------------------------------+
| ``x``                                                                 | ``int``                   | ``x``                                 | ``%x``                                |
+-----------------------------------------------------------------------+---------------------------+---------------------------------------+---------------------------------------+
| ``y``                                                                 | ``int``                   | ``y``                                 | ``%y``                                |
+-----------------------------------------------------------------------+---------------------------+---------------------------------------+---------------------------------------+

Note that ``%d`` is used for both ``detail`` and ``data`` in Tcl, depending on
the type of the event. Pythotk uses that internally, but it doesn't keep track
of the event types for you, so you need to do ``event.data(str)`` if you want
the ``detail`` string.



The "Tcl bind substitution" and "tkinter event attribute" columns are for
porting Tcl code and tkinter code to pythotk. If you are writing a new program
in pythotk, don't worry about them.


.. _virtual-event:

Virtual Events
--------------

Asd asd.
